<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fangspiel Deluxe Symbole</title>
<style>
body {
  margin:0; font-family:sans-serif; background: linear-gradient(160deg,#f0f8ff,#dbe9f4,#a3c2f2); color:#333; overflow:hidden;
}
canvas { display:block; background: rgba(255,255,255,0.7); margin:0 auto; border-radius:20px; box-shadow: 0 0 30px rgba(0,0,0,0.2);}
#score { position:absolute; top:10px; left:50%; transform:translateX(-50%); font-size:28px; color: #006400; font-weight:bold; text-shadow: 1px 1px 2px #fff;}
#difficulty { position:absolute; top:50px; left:50%; transform:translateX(-50%); background: rgba(0,0,0,0.1); padding:5px 15px; border-radius:10px; font-size:16px;}
#startScreen, #gameOver {
  position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
  background: rgba(255,255,255,0.95); padding:40px; border-radius:20px; text-align:center; box-shadow: 0 0 50px #006400;
  color:#333;
}
#startScreen button, #gameOver button { 
  padding:12px 25px; font-size:18px; margin-top:20px; cursor:pointer; border:none; border-radius:10px; background:#006400; color:white; font-weight:bold;}
footer { position:fixed; bottom:0; width:100%; background: rgba(255,255,255,0.7); padding:10px; text-align:center; font-size:14px; color:#333;}
footer a { color:#006400; text-decoration:none; cursor:pointer;}
.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(255,255,255,0.95); color:#333; padding:20px; overflow:auto;}
.modal h2 { text-align:center; }
.modal button { display:block; margin:20px auto; padding:12px 25px; font-size:16px; cursor:pointer; border:none; border-radius:10px; background:#006400; color:white; font-weight:bold;}
</style>
</head>
<body>

<div id="score">Punkte: 0</div>
<div id="difficulty">Schwierigkeit: <span id="diffLevel">1</span></div>
<canvas id="gameCanvas" width="600" height="400"></canvas>

<div id="startScreen">
  <h1>üéØ Fangspiel Deluxe Symbole üéØ</h1>
  <p>Fange die gr√ºnen B√§lle, vermeide die roten Bomben!</p>
  <p>Power-Ups (mit Symbol) zeigen an, ob sie gut ‚úÖ oder schlecht ‚ö†Ô∏è sind.</p>
  <button onclick="startGame()">Spiel starten</button>
</div>

<div id="gameOver">
  <h1>Game Over!</h1>
  <p>Dein Score: <span id="finalScore">0</span></p>
  <button onclick="restartGame()">Nochmal spielen</button>
</div>

<footer>
  <a onclick="showModal('impressum')">Impressum</a> | 
  <a onclick="showModal('datenschutz')">Datenschutzerkl√§rung</a>
</footer>

<div id="impressum" class="modal">
  <h2>Impressum</h2>
  <p>Fangspiel Deluxe Symbole ‚Äì erstellt von Kilian üòé</p>
  <button onclick="closeModal()">Schlie√üen</button>
</div>
<div id="datenschutz" class="modal">
  <h2>Datenschutzerkl√§rung</h2>
  <p>Es werden keine pers√∂nlichen Daten gespeichert. Highscores sind lokal und nur f√ºr dein Spiel sichtbar.</p>
  <button onclick="closeModal()">Schlie√üen</button>
</div>

<audio id="catchSound" src="https://freesound.org/data/previews/256/256113_3263906-lq.mp3"></audio>
<audio id="bombSound" src="https://freesound.org/data/previews/151/151022_2654110-lq.mp3"></audio>
<audio id="gameOverSound" src="https://freesound.org/data/previews/331/331912_3248244-lq.mp3"></audio>
<audio id="powerupSound" src="https://freesound.org/data/previews/403/403201_5121236-lq.mp3"></audio>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const catchSound = document.getElementById('catchSound');
const bombSound = document.getElementById('bombSound');
const gameOverSound = document.getElementById('gameOverSound');
const powerupSound = document.getElementById('powerupSound');

let player = { x:270, y:360, width:60, height:20, color:'green' };
let circles = [], confetti = [];
let score = 0, speedMultiplier = 0.3, gameRunning = false;

function spawnCircle() {
  let x = Math.random() * (canvas.width - 20);
  let typeChance = Math.random();
  let type, color, symbol;
  if(typeChance < 0.15){ 
    type='bomb'; color='#ff0000'; symbol='üí£';
  } else if(typeChance < 0.3){
    type='powerup'; color='#00ffff'; symbol='‚úÖ';
  } else{
    type='ball'; color='#00ff00'; symbol=''; // Punkte
  }
  let radius = type==='powerup'?20:15 + Math.random()*10;
  circles.push({ x:x, y:20, radius:radius, speed:1+Math.random()*1*speedMultiplier, color:color, type:type, symbol:symbol });
}

function drawPlayer() { 
  ctx.fillStyle=player.color; 
  ctx.shadowColor = '#fff';
  ctx.shadowBlur = 15;
  ctx.fillRect(player.x,player.y,player.width,player.height); 
  ctx.shadowBlur = 0;
}

function drawCircles() { 
  circles.forEach(c=>{
    ctx.fillStyle=c.color;
    ctx.beginPath();
    ctx.arc(c.x,c.y,c.radius,0,Math.PI*2);
    ctx.fill();
    if(c.symbol){
      ctx.font='16px sans-serif';
      ctx.textAlign='center';
      ctx.textBaseline='middle';
      ctx.fillStyle='#000';
      ctx.fillText(c.symbol,c.x,c.y);
    }
  });
}

function drawConfetti() { 
  confetti.forEach((f,i)=>{
    ctx.fillStyle=f.color; 
    ctx.fillRect(f.x,f.y,f.size,f.size); 
    f.y+=f.speed; f.x+=f.dx; f.life--; 
    if(f.life<=0) confetti.splice(i,1); 
  }); 
}

function createConfetti(x,y){
  for(let i=0;i<25;i++){
    confetti.push({
      x:x, y:y, dx:(Math.random()-0.5)*4, speed:2+Math.random()*3, 
      size:4+Math.random()*4, color:`hsl(${Math.random()*360},100%,70%)`, life:60+Math.random()*50
    });
  }
}

function update() {
  if(!gameRunning) return;
  circles.forEach((c,i)=>{
    c.y+=c.speed;
    if(c.y+c.radius>player.y && c.x>player.x && c.x<player.x+player.width){
      if(c.type==='ball'){ 
        score++; 
        createConfetti(c.x,c.y); 
        catchSound.currentTime=0; catchSound.play(); 
        if(score%5===0){ speedMultiplier+=0.05; document.getElementById('diffLevel').innerText=(speedMultiplier).toFixed(2); } 
      }
      else if(c.type==='bomb'){ 
        bombSound.currentTime=0; bombSound.play(); 
        gameOver(); 
      }
      else if(c.type==='powerup'){
        powerupSound.currentTime=0; powerupSound.play();
        player.width = Math.min(player.width+30,200);
        player.color = '#00ffff';
        setTimeout(()=>{player.width=60; player.color='green'},5000);
      }
      circles.splice(i,1);
    } else if(c.y-c.radius>canvas.height){ 
      if(c.type==='ball') gameOver(); 
      else circles.splice(i,1);
    }
  });
}

function gameLoop(){
  if(!gameRunning) return;
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawPlayer();
  drawCircles();
  drawConfetti();
  update();
  requestAnimationFrame(gameLoop);
}

// Steuerung
let keys={};
document.addEventListener('keydown',e=>keys[e.key]=true);
document.addEventListener('keyup',e=>keys[e.key]=false);
function handleKeyboard(){ if(keys['ArrowLeft'] && player.x>0) player.x-=5*speedMultiplier; if(keys['ArrowRight'] && player.x+player.width<canvas.width) player.x+=5*speedMultiplier; }

canvas.addEventListener('mousemove', e=>{
  let rect = canvas.getBoundingClientRect();
  player.x = e.clientX - rect.left - player.width/2;
  if(player.x<0) player.x=0; if(player.x+player.width>canvas.width) player.x=canvas.width-player.width;
});
canvas.addEventListener('touchmove', e=>{
  e.preventDefault();
  let rect = canvas.getBoundingClientRect();
  player.x = e.touches[0].clientX - rect.left - player.width/2;
  if(player.x<0) player.x=0; if(player.x+player.width>canvas.width) player.x=canvas.width-player.width;
},{passive:false});

let spawnInterval;

function startGame(){
  document.getElementById('startScreen').style.display='none';
  document.getElementById('gameOver').style.display='none';
  gameRunning=true;
  score=0; speedMultiplier=0.3; player.width=60; player.color='green';
  circles=[]; confetti=[];
  document.getElementById('score').innerText='Punkte: 0';
  document.getElementById('diffLevel').innerText='1';
  spawnInterval = setInterval(spawnCircle,1500);
  requestAnimationFrame(gameLoop);
}

function gameOver(){
  gameRunning=false;
  clearInterval(spawnInterval);
  document.getElementById('finalScore').innerText=score;
  document.getElementById('gameOver').style.display='block';
  gameOverSound.currentTime=0; gameOverSound.play();
}

function restartGame(){
  startGame();
}

function showModal(id){ document.getElementById(id).style.display='block'; }
function closeModal(){ document.querySelectorAll('.modal').forEach(m=>m.style.display='none'); }
</script>

</body>
</html>
